// Generated by IcedCoffeeScript 108.0.11
(function() {
  angular.module('app.controllers', ['ui.bootstrap']).controller('MainController', function($scope, $rootScope, $timeout, $cookies, $http, Account) {
    var busyCount, notifications;
    $scope.page = {
      title: 'Topcat'
    };
    busyCount = 0;
    $scope.busy = {
      start: function() {
        return busyCount = busyCount + 1;
      },
      stop: function() {
        return busyCount = busyCount - 1;
      },
      value: function() {
        return busyCount > 0;
      }
    };
    notifications = [];
    $scope.notifications = {
      current: notifications,
      add: function(message) {
        var n, remove;
        n = {
          message: message
        };
        notifications.push(n);
        remove = function() {
          return notifications.pop();
        };
        return $timeout(remove, 4000);
      }
    };
    $scope.showPendingSignOffButton = false;
    $scope.loadRecordsPendingSignOff = function() {
      return $http.get('../api/publishing/opendata/pendingsignoff').success(function(result) {
        return $scope.showPendingSignOffButton = (result.length > 0) && $scope.user.isIaoUser;
      });
    };
    Account.then(function(user) {
      $scope.user = user;
      return $scope.loadRecordsPendingSignOff();
    });
    return $rootScope.$on('$locationChangeStart', function() {
      return $('.qtip').qtip('hide');
    });
  });

}).call(this);

//# sourceMappingURL=MainController.js.map

(function(){angular.module("app.controllers").controller("SearchController",function(n,t,i,r,u){var f,o,e;return f="Topcat - ",n.query={q:i.search().q||"",p:0,n:25},n.keyword={},n.keyword.flag=!1,n.app={starting:!0},u(function(){return n.app.starting=!1},500),n.range=function(n,t,i){var u,e,r,f;for(i=i===void 0?1:i,e=[],f=[],u=r=0;0<=t?r<=t:r>=t;u=r+=i)f.push(e.push(u));return f},n.maxPages=function(n,t){return Math.ceil(n/t)-1},o=function(t){return n.keywordFlag=!1,n.query.p=0,n.query.q=t,e()},e=function(){return n.keyword.flag?n.doKeywordSearch(n.keyword,n.query.p):(i.search("q",n.query.q),i.search("p",n.query.p),i.search("n",n.query.n),t.page={title:n.query.q?f+n.query.q:f},n.busy.start(),r.get("../api/search?"+$.param(n.query)).success(function(t){if(angular.equals(t.query,n.query))return n.result=t})["finally"](function(){return n.busy.stop()}))},n.doKeywordSearch=function(i,u){var e;return n.keyword=i,n.keyword.flag=!0,e={},delete i.$$hashKey,e.keyword=i,e.pageNumber=u,e.numberOfRecords=n.query.n,n.busy.start(),r.post("../api/keywordSearch",e).success(function(r){return n.result=r,t.page={title:f+i.value}})["finally"](function(){return n.busy.stop()})},n.$watch("query.q",o,!0),n.$watch("query.p",e,!0),n.$watch(function(){return i.search().q},function(t){return n.query.q=t||""})})}).call(this)
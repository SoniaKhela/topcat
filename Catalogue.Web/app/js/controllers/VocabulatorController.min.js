(function(){var n=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};angular.module("app.controllers").controller("VocabulatorController",function(t,i,r){var f,u;return t.vocabulator||(t.vocabulator={}),angular.equals({},t.vocabulator)&&angular.extend(t.vocabulator,{q:"",allVocabs:[],filteredVocabs:[],selectedVocab:{},loadedVocab:{},foundKeywords:[],selectedKeywords:[]}),u=t.vocabulator,t.colourHasher=r,u.allVocabs.length||i.get("../api/vocabularylist").success(function(n){return u.allVocabs=n,u.filteredVocabs=n}),t.doFind=function(n,r){var f,e,o;return f=function(){return u.loadedVocab={},u.selectedVocab={}},o=function(){var i,t;return n=u.q.toLowerCase(),i=function(){var i,e,r,f;for(r=u.allVocabs,f=[],i=0,e=r.length;i<e;i++)t=r[i],t.name.toLowerCase().indexOf(n)!==-1&&f.push(t);return f}(),u.filteredVocabs=i},e=function(){return u.q===""?u.foundKeywords=[]:i.get("../api/keywords?q="+u.q).success(function(n){return u.foundKeywords=n}).error(function(n){return t.notifications.add("Oops! "+n.message)})},n!==r?(f(),o(),e()):void 0},t.$watch("vocabulator.q",t.doFind),f=function(n,r){if(n&&n!==r)return i.get("../api/vocabularies?id="+encodeURIComponent(n.id)).success(function(n){return u.loadedVocab=n}).error(function(n){return t.notifications.add("Oops! "+n.message)})},t.$watch("vocabulator.selectedVocab",f),t.selectKeyword=function(t){if(n.call(u.selectedKeywords,t)<0)return u.selectedKeywords.push(t)},t.unselectKeyword=function(n){return u.selectedKeywords.splice(u.selectedKeywords.indexOf(n),1)},t.close=function(){var n;return n=u.selectedKeywords,u.selectedKeywords=[],t.$close(n)}})}).call(this);
//# sourceMappingURL=VocabulatorController.min.js.map

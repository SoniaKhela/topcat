(function(){angular.module("app.controllers").controller("AssessmentController",function(n,t){var i,r,u;return i=function(n){var t,i,r;return r=n.getFullYear(),i=u(n.getMonth()+1),t=u(n.getDate()),""+t+"/"+i+"/"+r},u=function(n){return n<10?"0"+n:n},n.assessmentRequest={},n.assessmentRequest.id=n.form.id,n.assessmentWidth="85%",n.signOffWidth="15%",n.showSignOffInfo=n.form.publication!==null&&n.form.publication.openData.completed,n.signOffButtonDisabled=!n.user.isIaoUser||n.form.publication!==null&&n.form.publication.openData.signOff!==null,r=function(){return n.assessmentButtonText=n.form.publication!==null&&n.form.publication.openData.assessment.completed?n.form.publication.openData.assessment.initialAssessmentWasDoneOnSpreadsheet?"Initial assessment completed on spreadsheet":"Completed by "+n.form.publication.openData.assessment.completedByUser.displayName+" on "+i(new Date(n.form.publication.openData.assessment.completedOnUtc)):"I AGREE"},r(),n.signOffButtonText=n.form.publication!==null&&n.form.publication.openData.signOff!==null?"Signed off by "+n.form.publication.openData.signOff.user.displayName+" on "+i(new Date(n.form.publication.openData.signOff.dateUtc)):n.user.isIaoUser?"SIGN OFF":"Pending sign off",n.assessClick=function(){return t.put("../api/publishing/opendata/assess",n.assessmentRequest).success(function(t){return n.status.refresh(),n.expandSignOff(),n.form=t.record,r()})["catch"](function(t){return n.notifications.add(t.data.exceptionMessage),n.$dismiss()})},n.expandSignOff=function(){return n.assessmentWidth="50%",n.signOffWidth="50%"},n.close=function(){return n.$close(n.form)}})}).call(this);
(function(){var n,t;angular.module("app.controllers").controller("EditorController",function(i,r,u){i.lookups={},r.get("../api/topics").success(function(n){return i.lookups.topics=n}),i.getSecurityText=t,i.reset=function(){return i.form=angular.copy(u)},i.save=function(){return i.busy.start(),i.validation={},r.put("../api/records/"+u.id,i.form).then(function(n){var o,t,s,r,f,h,c,e;if(n.data.success)u=n.data.record,i.reset();else for(i.validation=n.data.validation,t=n.data.validation.errors,t.length>0&&i.notifications.add("There were errors"),r=0,h=t.length;r<h;r++)for(o=t[r],e=o.fields,f=0,c=e.length;f<c;f++)s=e[f],i.theForm[s].$setValidity("server",!1);return i.busy.stop()})},i.isClean=function(){return angular.equals(i.form,u)},i.isSaveHidden=function(){return i.isClean()||u.readOnly},i.isResetHidden=function(){return i.isClean()},i.isSaveDisabled=function(){return i.isClean()},i.removeKeyword=function(n){return i.form.gemini.keywords.splice($.inArray(n,i.form.gemini.keywords),1)},i.addKeyword=function(){return i.form.gemini.keywords.push({vocab:"",value:""})},i.reset(),i.validation=n}),t=function(n){switch(n){case 0:return"Open";case 1:return"Restricted";case 2:return"Classified"}},n={errors:[{message:"There was an error"},{message:"There was another error"}]}}).call(this)
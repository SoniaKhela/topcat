(function(){var n;angular.module("app.controllers").controller("EditorController",function(t,i,r,u){t.lookups={},r.get("../api/topics").success(function(n){return t.lookups.topics=n}),t.state=/^\w\w$/,t.zip=/^\d\d\d\d\d$/,t.getSecurityText=function(n){switch(n){case 0:return"Open";case 1:return"Restricted";case 2:return"Classified"}},t.reset=function(){return t.form=angular.copy(u)},t.save=function(){return i.busy={value:!0},t.validation={},r.put("../api/records/"+u.id,t.form).then(function(n){var s,h,r,f,c,l,e,o;if(n.data.success)u=n.data.record,t.reset();else for(t.validation=n.data.validation,e=n.data.validation.errors,r=0,c=e.length;r<c;r++)for(s=e[r],o=s.fields,f=0,l=o.length;f<l;f++)h=o[f],t.theForm[h].$setValidity("server",!1);return i.busy={value:!1}})},t.isClean=function(){return angular.equals(t.form,u)},t.isSaveHidden=function(){return t.isClean()||u.readOnly},t.isResetHidden=function(){return t.isClean()},t.isSaveDisabled=function(){return t.isClean()},t.removeKeyword=function(n){var i;return i=t.form.gemini.keywords.indexOf(n),t.form.gemini.keywords.splice(i,1)},t.addKeyword=function(){return t.form.gemini.keywords.push({vocab:"",value:""})},t.reset(),t.validation=n}),n={errors:[{message:"There was an error"},{message:"There was another error"}]}}).call(this)
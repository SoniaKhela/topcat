(function(){var n;angular.module("app.controllers").controller("EditorController",function(t,i,r){t.lookups={},i.get("../api/topics").success(function(n){return t.lookups.topics=n}),t.state=/^\w\w$/,t.zip=/^\d\d\d\d\d$/,t.getSecurityText=function(n){switch(n){case 0:return"Open";case 1:return"Restricted";case 2:return"Classified"}},t.reset=function(){return t.form=angular.copy(r)},t.save=function(){return t.busy.start(),t.validation={},i.put("../api/records/"+r.id,t.form).then(function(n){var o,s,i,u,h,c,f,e;if(n.data.success)r=n.data.record,t.reset();else for(t.validation=n.data.validation,f=n.data.validation.errors,i=0,h=f.length;i<h;i++)for(o=f[i],e=o.fields,u=0,c=e.length;u<c;u++)s=e[u],t.theForm[s].$setValidity("server",!1);return t.busy.stop()})},t.isClean=function(){return angular.equals(t.form,r)},t.isSaveHidden=function(){return t.isClean()||r.readOnly},t.isResetHidden=function(){return t.isClean()},t.isSaveDisabled=function(){return t.isClean()},t.removeKeyword=function(n){var i;return i=t.form.gemini.keywords.indexOf(n),t.form.gemini.keywords.splice(i,1)},t.addKeyword=function(){return t.form.gemini.keywords.push({vocab:"",value:""})},t.reset(),t.validation=n}),n={errors:[{message:"There was an error"},{message:"There was another error"}]}}).call(this)
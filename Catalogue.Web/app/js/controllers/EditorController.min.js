(function(){angular.module("app.controllers").controller("EditorController",function(n,t,i,r){n.lookups={},i.get("../api/topics").success(function(t){return n.lookups.topics=t}),n.state=/^\w\w$/,n.zip=/^\d\d\d\d\d$/,n.getSecurityText=function(n){switch(n){case 0:return"Open";case 1:return"Restricted";case 2:return"Classified"}},n.reset=function(){return n.form=angular.copy(r)},n.save=function(){return t.busy={value:!0},n.errors={},i.put("../api/records/"+r.id,n.form).then(function(i){return i.data.success?(r=i.data.record,n.reset()):angular.forEach(i.data.validation.errors,function(t){return angular.forEach(t.fields,function(t){return n.theForm[t].$setValidity("server",!1)})}),t.busy={value:!1}})},n.isClean=function(){return angular.equals(n.form,r)},n.isSaveHidden=function(){return n.isClean()||r.readOnly},n.isResetHidden=function(){return n.isClean()},n.isSaveDisabled=function(){return n.isClean()},n.removeKeyword=function(t){var i;return i=n.form.gemini.keywords.indexOf(t),n.form.gemini.keywords.splice(i,1)},n.addKeyword=function(){return n.form.gemini.keywords.push({vocab:"",value:""})},n.reset()})}).call(this)
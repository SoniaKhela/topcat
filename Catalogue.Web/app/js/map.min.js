(function(){var r,u,f,e,t,i,n;t=angular.module("app.map");u=function(n,t){var i,r;return r=angular.element(n).innerHeight(),i=angular.element(t).offset().top,r-i-10+"px"};r=L.tileLayer("https://{s}.tiles.mapbox.com/v4/petmon.lp99j25j/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoicGV0bW9uIiwiYSI6ImdjaXJLTEEifQ.cLlYNK1-bfT0Vv4xUHhDBA",{maxZoom:18,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap<\/a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<\/a>, Imagery © <a href="http://mapbox.com">Mapbox<\/a>',id:"petmon.lp99j25j"});i={fillOpacity:.2,weight:1,color:"#222"};f={fillOpacity:.6,weight:1,color:"rgb(217,38,103)"};n={};e=function(n,t){var r,u;r=[[n.box.south,n.box.west],[n.box.north,n.box.east]];u=L.rectangle(r,i);u.on("click",function(){return t.$apply(function(){return t.highlighted.result=n})});return{r:n,bounds:r,rect:u}};t.directive("tcSearchMap",function(t){return{link:function(o,s){var c,h;h=L.map(s[0]);h.addLayer(r);c=L.layerGroup().addTo(h);o.$watch("result.results",function(i){var f,h,r,l;for(n=function(){var n,r,t;for(t=[],n=0,r=i.length;n<r;n++)f=i[n],f.box.north&&t.push(function(n){return e(n,o)}(f));return t}(),c.clearLayers(),r=0,l=n.length;r<l;r++)h=n[r],c.addLayer(h.rect);return s.css("height",u(t,s)),console.log(n.length),n.length>0?o.highlighted.result=n[0].r:void 0});h.on("zoomend",function(){return o.$evalAsync(function(){return o.highlighted.goto=null})});return o.$watch("highlighted.result",function(t,r){var u,e,s;return o.highlighted.goto=null,n.length&&h.fitBounds(function(){var t,r,i;for(i=[],t=0,r=n.length;t<r;t++)u=n[t],i.push(u.bounds);return i}(),{padding:[5,5]}),(e=function(){var t,f,i;for(i=[],t=0,f=n.length;t<f;t++)u=n[t],u.r===r&&i.push(u.rect);return i}()[0])!=null&&e.setStyle(i),(s=function(){var i,f,r;for(r=[],i=0,f=n.length;i<f;i++)u=n[i],u.r===t&&r.push(u.rect);return r}()[0])!=null?s.setStyle(f):void 0}),o.$watch("highlighted.goto",function(t){var i,r;return i=function(){var i,f,u;for(u=[],i=0,f=n.length;i<f;i++)r=n[i],r.r===t&&u.push(r.rect);return u}()[0],i?h.fitBounds(i,{padding:[50,50]}):void 0})}}});t.directive("tcSearchResultScrollHighlighter",function(t){return{link:function(i,r){var u;return u=angular.element(t),u.bind("scroll",function(){var t,o,f,e;return o=function(){var n,e,i,f;for(i=r.children(),f=[],n=0,e=i.length;n<e;n++)t=i[n],angular.element(t).offset().top>u.scrollTop()&&f.push(t);return f}(),f=function(){var t,r,i;for(i=[],t=0,r=n.length;t<r;t++)e=n[t],e.r.id===o[0].id&&i.push(e.r);return i}()[0],f?i.$apply(function(){return i.highlighted.result=f}):void 0})}}});t.directive("tcStickToTop",function(n,t){return{link:function(i,r){var e,u,f;return f=angular.element(n),u=function(){return{v:f.scrollTop(),e:r.offset().top,w:r.width()}},e=function(){var n;return n=u(),f.bind("scroll",function(){var t;return(t=u(),t.v>t.e)?(r.addClass("stick-to-top"),r.css("width",n.w)):t.v<n.e?(r.removeClass("stick-to-top"),r.css("width","")):void 0})},t(e,100)}}})}).call(this);
//# sourceMappingURL=map.min.js.map

(function(){var r,u,f,e,t,i,n;t=angular.module("app.map");u=function(n,t){var i,r;return r=angular.element(n).innerHeight(),i=angular.element(t).offset().top,r-i-10+"px"};r=L.tileLayer("https://{s}.tiles.mapbox.com/v4/petmon.lp99j25j/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoicGV0bW9uIiwiYSI6ImdjaXJLTEEifQ.cLlYNK1-bfT0Vv4xUHhDBA",{maxZoom:18,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap<\/a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<\/a>, Imagery © <a href="http://mapbox.com">Mapbox<\/a>',id:"petmon.lp99j25j"});i={fillOpacity:.2,weight:1,color:"#222"};f={fillOpacity:.6,weight:1,color:"rgb(217,38,103)"};n={};e=function(n,t){var u,r;u=[[n.box.south,n.box.west],[n.box.north,n.box.east]];r=L.rectangle(u,i);r.on("mouseover",function(){return t.$apply(function(){return t.highlighted.result=n})});r.on("click",function(){return t.$apply(function(){return t.highlighted.result=n})});return{r:n,bounds:u,rect:r}};t.directive("tcSearchMap",function(t){return{link:function(o,s){var c,h;return h=L.map(s[0]),h.addLayer(r),c=L.layerGroup().addTo(h),o.$watch("result.results",function(i){var l,r,f,a;for(n=function(){var n,r,t;for(t=[],n=0,r=i.length;n<r;n++)l=i[n],l.box&&t.push(function(n){return e(n,o)}(l));return t}(),c.clearLayers(),f=0,a=n.length;f<a;f++)r=n[f],c.addLayer(r.rect);return s.css("height",u(t,s)),n.length>0?(o.highlighted.result=n[0].r,h.fitBounds(function(){var t,u,i;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push(r.bounds);return i}(),{padding:[5,5]})):void 0}),o.$watch("highlighted.result",function(t,r){var u,e,o;return(e=function(){var t,f,i;for(i=[],t=0,f=n.length;t<f;t++)u=n[t],u.r===r&&i.push(u.rect);return i}()[0])!=null&&e.setStyle(i),(o=function(){var i,f,r;for(r=[],i=0,f=n.length;i<f;i++)u=n[i],u.r===t&&r.push(u.rect);return r}()[0])!=null?o.setStyle(f):void 0})}}});t.directive("tcSearchResultScrollHighlighter",function(t){return{link:function(i,r){var u;return u=angular.element(t),u.bind("scroll",function(){var f,e,t,o;return e=function(){var n,e,t,i;for(t=r.children(),i=[],n=0,e=t.length;n<e;n++)f=t[n],angular.element(f).offset().top>u.scrollTop()&&i.push(f);return i}(),console.log(e[0]),t=function(){var t,r,i;for(i=[],t=0,r=n.length;t<r;t++)o=n[t],o.r.id===e[0].id&&i.push(o.r);return i}()[0],console.log(t),t?i.$apply(function(){return i.highlighted.result=t}):void 0})}}});t.directive("tcStickToTop",function(n,t){return{link:function(i,r){var e,u,f;return f=angular.element(n),u=function(){return{v:f.scrollTop(),e:r.offset().top,w:r.width()}},e=function(){var n;return n=u(),f.bind("scroll",function(){var t;return(t=u(),t.v>t.e)?(r.addClass("stick-to-top"),r.css("width",n.w)):t.v<n.e?(r.removeClass("stick-to-top"),r.css("width","")):void 0})},t(e,100)}}})}).call(this);
//# sourceMappingURL=map.min.js.map

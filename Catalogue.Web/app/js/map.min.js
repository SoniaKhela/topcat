(function(){var r,u,f,e,t,i,o,n,s;t=angular.module("app.map");u=function(n,t){var i,r;return r=angular.element(n).innerHeight(),i=angular.element(t).offset().top,r-i-10+"px"};r=L.tileLayer("https://{s}.tiles.mapbox.com/v4/petmon.lp99j25j/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoicGV0bW9uIiwiYSI6ImdjaXJLTEEifQ.cLlYNK1-bfT0Vv4xUHhDBA",{maxZoom:18,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap<\/a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<\/a>, Imagery © <a href="http://mapbox.com">Mapbox<\/a>',id:"petmon.lp99j25j"});i={fillOpacity:.2,weight:1,color:"#222"};o={fillOpacity:.5,weight:1,color:"rgb(217,38,103)"};e=function(n){switch(n.length){case 1:return{padding:[50,50]};case 2:return{padding:[20,20]};default:return{padding:[5,5]}}};f=function(n){var r,u,f,e,o,s,t,i;return t=n[0],f=t[0],e=t[1],i=n[1],u=i[0],r=i[1],o=r-e,s=u-f,Math.abs(o*s)};n={};s=function(t,r){var u;return n=function(){var n,e,f;for(f=[],n=0,e=t.length;n<e;n++)u=t[n],u.box.north&&f.push(function(n){var u,t;u=[[n.box.south,n.box.west],[n.box.north,n.box.east]];t=L.rectangle(u,i);t.on("mouseover",function(){return t.setStyle({fillOpacity:.4})});t.on("mouseout",function(){return t.setStyle({fillOpacity:.2})});t.on("click",function(){return r.$apply(function(){return r.map.current.selected=n})});return{r:n,bounds:u,rect:t}}(u));return f}()};t.directive("tcSearchMap",function(t){return{link:function(h,c){var v,a,l;return l=L.map(c[0]),l.addLayer(r),a=L.layerGroup().addTo(l),h.$watch("result.results",function(i){var e,o,r,l;for(s(i,h),a.clearLayers(),e=_(n).sortBy(function(n){return f(n.bounds)}).reverse().value(),r=0,l=e.length;r<l;r++)o=e[r],a.addLayer(o.rect);return c.css("height",u(t,c)),n.length>0?h.map.current.highlighted=n[0].r:void 0}),v=function(t,r){var s,h,v,u,f,y,c,p,a;for(console.log("hi"),t.selected!==r.selected&&(t.highlighted=null,h=function(){var i,f,r;for(r=[],i=0,f=n.length;i<f;i++)u=n[i],u.r===t&&r.push(u.rect);return r}()[0],h&&l.fitBounds(h,{padding:[50,50]})),n.length&&l.fitBounds(function(){var t,r,i;for(i=[],t=0,r=n.length;t<r;t++)u=n[t],i.push(u.bounds);return i}(),e(n)),c=_.partition(n,function(n){return n.r===t.highlighted||n.r===t.selected}),v=c[0],s=c[1],(p=v[0])!=null&&p.rect.setStyle(o),a=[],f=0,y=s.length;f<y;f++)u=s[f],a.push(u.rect.setStyle(i));return a},h.$watch("map.current",v,!0)}}});t.directive("tcSearchResultScrollHighlighter",function(t){return{link:function(i,r){var u;return u=angular.element(t),u.bind("scroll",function(){var t,o,f,e;return o=function(){var n,e,i,f;for(i=r.children(),f=[],n=0,e=i.length;n<e;n++)t=i[n],angular.element(t).offset().top>u.scrollTop()&&f.push(t);return f}(),f=function(){var t,r,i;for(i=[],t=0,r=n.length;t<r;t++)e=n[t],e.r.id===o[0].id&&i.push(e.r);return i}()[0],f?i.$apply(function(){return i.map.current.highlighted=f}):void 0})}}});t.directive("tcStickToTop",function(n,t){return{link:function(i,r){var e,u,f;return f=angular.element(n),u=function(){return{v:f.scrollTop(),e:r.offset().top,w:r.width()}},e=function(){var n;return n=u(),f.bind("scroll",function(){var t;return(t=u(),t.v>t.e)?(r.addClass("stick-to-top"),r.css("width",n.w)):t.v<n.e?(r.removeClass("stick-to-top"),r.css("width","")):void 0})},t(e,100)}}})}).call(this);
//# sourceMappingURL=map.min.js.map

(function(){var t,n;n=angular.module("app.map");t=function(n,t){var i,r;return r=angular.element(n).innerHeight(),i=angular.element(t).offset().top,r-i-50+"px"};n.directive("tcSearchMap",function(n,i,r){return{link:function(u,f){var s,c,o,h,e;return f.css("height",t(n,f)),o=L.map(f[0]),L.tileLayer("https://{s}.tiles.mapbox.com/v4/petmon.lp99j25j/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoicGV0bW9uIiwiYSI6ImdjaXJLTEEifQ.cLlYNK1-bfT0Vv4xUHhDBA",{maxZoom:18,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap<\/a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<\/a>, Imagery © <a href="http://mapbox.com">Mapbox<\/a>',id:"petmon.lp99j25j"}).addTo(o),s=L.layerGroup().addTo(o),e={},h={color:"#222",fillOpacity:.2,weight:1},c={color:"rgb(217,38,103)",fillOpacity:.6,weight:1},u.$watch("result.results",function(n){var c,t,f,l;for(e=function(){var t,e,f;for(f=[],t=0,e=n.length;t<e;t++)c=n[t],c.box&&f.push(function(n){var f,t;f=[[n.box.south,n.box.west],[n.box.north,n.box.east]];t=L.rectangle(f,h);t.on("mouseover",function(){return u.$apply(function(){return u.highlighted.id=n.id})});t.on("click",function(){return u.$apply(function(){return u.highlighted.id=n.id,i.hash(n.id),r()})});return{id:n.id,bounds:f,rect:t}}(c));return f}(),s.clearLayers(),f=0,l=e.length;f<l;f++)t=e[f],s.addLayer(t.rect);if(e.length>0)return u.highlighted.id=e[0].id,o.fitBounds(function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(t.bounds);return i}(),{padding:[5,5]})}),u.$watch("highlighted.id",function(n,t){var i,r,u;return(r=function(){var n,u,r;for(r=[],n=0,u=e.length;n<u;n++)i=e[n],i.id===t&&r.push(i.rect);return r}()[0])!=null&&r.setStyle(h),(u=function(){var t,u,r;for(r=[],t=0,u=e.length;t<u;t++)i=e[t],i.id===n&&r.push(i.rect);return r}()[0])!=null?u.setStyle(c):void 0})}}});n.directive("tcBlah",function(n){return{link:function(t,i){var r;return r=angular.element(n),r.bind("scroll",function(){var n,u;return u=function(){var t,e,u,f;for(u=i.children(),f=[],t=0,e=u.length;t<e;t++)n=u[t],angular.element(n).offset().top>r.scrollTop()&&f.push(n);return f}(),u.length>0?t.$apply(function(){return t.highlighted.id=u[0].id}):void 0})}}});n.directive("tcStickToTop",function(n,t){return{link:function(i,r){var e,u,f;return f=angular.element(n),u=function(){return{v:f.scrollTop(),e:r.offset().top,w:r.width()}},e=function(){var n;return n=u(),f.bind("scroll",function(){var t;return(t=u(),t.v>t.e)?(r.addClass("stick-to-top"),r.css("width",n.w)):t.v<n.e?(r.removeClass("stick-to-top"),r.css("width","")):void 0})},t(e,100)}}})}).call(this);
//# sourceMappingURL=map.min.js.map

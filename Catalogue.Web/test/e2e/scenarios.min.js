(function(){describe("when starting the app",function(){return beforeEach(function(){return browser().navigateTo("../../app/index.html")}),it("should redirect to /",function(){return expect(browser().location().path()).toBe("/")}),it("should have empty query parameter values",function(){var r,n,u,t,i;for(t=browser().location().search(),i=[],n=0,u=t.length;n<u;n++)r=t[n],i.push(function(n){return expect(n).toBe("")}(r));return i})}),describe('when searching for "underwater"',function(){return beforeEach(function(){return input("query.q").enter("underwater")}),it("should return 3 results",function(){return expect(repeater(".search-result").count()).toBe(3)}),it("should update search querystring correctly",function(){return expect(browser().location().search()).toEqual({q:"underwater"})})}),describe("when deleting all search box content",function(){return beforeEach(function(){return input("query.q").enter("")}),it("should show no results",function(){return expect(repeater(".search-result").count()).toBe(0)})}),describe("search results specifications",function(){return it("can search for partial words",function(){return input("query.q").enter("bio"),expect(element(".search-result").text()).toContain("biota"),expect(element(".search-result").text()).toContain("biotopes"),expect(repeater(".search-result").count()).toBeGreaterThan(5)}),it("can search for integers",function(){return input("query.q").enter("2003"),expect(element(".search-result").text()).toContain("2003"),expect(repeater(".search-result").count()).toBeGreaterThan(5)}),it("can search for variations of stem",function(){return input("query.q").enter("study"),expect(element(".search-result").text()).toContain("study"),expect(element(".search-result").text()).toContain("studied"),expect(element(".search-result").text()).toContain("studies")}),it("title should be more important than abstract",function(){return input("query.q").enter("bird")})}),describe("when viewing a read-only record",function(){return beforeEach(function(){return browser().navigateTo("../../app/#/editor/b65d2914-cbac-4230-a7f3-08d13eea1e92")}),it("should open the record",function(){return expect(input("form.gemini.title").val()).toBe("An example read-only record")}),it("should not be editable",function(){return input("form.gemini.title").enter("mwaa ha ha"),expect(element(".btn-danger:visible").count()).toBe(0)})}),describe("can edit top-copy status",function(){return beforeEach(function(){return browser().navigateTo("../../app/#/editor/94f2c217-2e45-42be-8b48-c5075401e508")}),it("should start as not top-copy",function(){return expect(element(".editor-top-copy button:contains('No')").attr("class")).toContain("btn-primary")}),it("should update to top-copy",function(){return using(".editor-top-copy"),element("button:contains('Yes')").click(),expect(element("button:contains('Yes')").attr("class")).toContain("btn-primary"),expect(element("button:contains('No')").attr("class")).toContain("btn-default")})}),describe("can edit security level",function(){return beforeEach(function(){return browser().navigateTo("../../app/#/editor/679434f5-baab-47b9-98e4-81c8e3a1a6f9")}),it('should start as "open"',function(){return expect(element(".editor-security button").attr("class")).toContain("btn-default")}),it("should update to restricted",function(){return using(".editor-security"),element("button:contains('Open')").click(),expect(element("button").attr("class")).toContain("btn-warning")})})}).call(this)